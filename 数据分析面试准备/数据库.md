###    这并不是一篇讲解内容，只是我在面试前的突击速成，不适用于广大学习者

犹豫在大数据方面知识盲区较大，特意用几天的时间恶补相关知识，愣了半天一时间不知从何下手......

## SQL
SQL是干什么的： 利用SQL可以访问和处理数据库，即对大量的数据进行操作，在此我将他类比为我经常用pandas做的数据处理的东西，一下子觉得彷佛全会了.....  

SQL 面向数据库执行查询  
SQL 可从数据库取回数据  
SQL 可在数据库中插入新的记录  
SQL 可更新数据库中的数据  
SQL 可从数据库删除记录  
SQL 可创建新数据库  
SQL 可在数据库中创建新表  
SQL 可在数据库中创建存储过程  
SQL 可在数据库中创建视图  
SQL 可以设置表、存储过程和视图的权限  

总结：SQL可以对数据进行增删查找，可将数据可视化，可对数据进行统计操作等等  


#            以下内容转自知乎  https://zhuanlan.zhihu.com/p/57558184 

其实该内容实现的操作我基本都用pandas操作完成过，但是pandas对于海量数据的处理能力明显很差，死机更是常见  

一、创建和操纵表  
1.创建表语法  

create table <表名>(  
<列名1> <数据类型> <约束条件>  
<列名2> <数据类型> <约束条件>  
<列名3> <数据类型> <约束条件>  
...  
);  
2.NULL值  

在定义表时，可以在约束条件中指定该列允许或不允许NULL值。如果指定不允许NULL值，则在插入数据时如果为NULL就会报错。  
 
3.默认值  

可以在定义表时使用默认值，使用关键词default <值>进行设定，如果在插入数据时没有值插入，则该列会插入默认值。  

4.更新表  

更新表使用alter table语句，我们可以进行如下的操作。  

alter table <表名> add column <列名> <数据类型>;     //增加新列  
alter table <表名> drop column <列名>;               //删除列  
5.重命名表  

rename table <旧表名> to <新表名>;  
alter table <旧表名> rename to <新表名>;  
6.删除表  

drop table <表名>;  
二、检索数据  
1.检索单列  

select <列名> from <表名>;  
2.检索多列

select <列名1>,<列名2>,... from <表名>;  
3.检索所有列  

select * from <表名>;  
4.检索不同值  

select distinct(<列名>) from <表名>;  
5.限制结果  

在mysql中，如果我们需要限制结果输出的条数，可以使用limit <数字>来表示限制的行数。  


三、排序检索数据  
有时我们需要对检索出来的数据进行排序，这时我们使用如下语句进行。  
 
order by <列名> asc/desc;  
asc为升序排序，也是mysql中默认的排序方式；desc表示按照降序排序。此外根据需要我们也可以对多列进行排序，如下代码所示。  

order by <列名1> <排序方法>,<列名2> <排序方式>...;  
值得注意的是，order by语句通常位于查询语句的最后面。后面会具体介绍查询语句的完整构成。  

四、过滤数据  
1.使用where子句  

在sql中，我们使用where子句来对查询出的结果进行过滤，得到我们所需要的数据。它的格式如下。  

select <列名> from <表名>  
where <过滤条件>;  
过滤条件有多个时，我们可以使用and或or来进行多个条件的罗列。值得注意的是，当有多个过滤条件是，and的优先级会高于or，这也许会导致一些逻辑错误，需要注意。  

2.where子句操作符  


值得注意的是，在判断某个值是否为空值是，应该使用is null或is not null来判断，而不是使用"= null"或"!= null"。  

3.使用通配符进行过滤  

在用通配符进行过滤时，我们使用like操作符进行。  

通配符主要包括两个，它们分别为百分号'%'和下划线'_'。  

其中'%'表示任意长度的字符串，而下划线'_'只表示一个字符。  

需要注意的是，'%'不仅可以表示一个或多个字符，还可以表示0个字符。  

五、创建计算字段  
1.计算字段  

存储在数据库表中的数据一般不是应用程序所需要的格式。  

我们需要直接从数据库中检索出转化、计算或格式化过的数据；而不是检索出数据，然后再在客户机应用改程序或报告程序中重新格式化。  

只有数据库知道SELECT语句中那些列是实际的表列，哪些列是计算字段。从客户机（应用程序）的角度来看，计算字段的额数据是以与其他列的数据相同的方式返回的。  

2.拼接字段  

在mysql中，我们可以使用concat函数对字段进行拼接，格式如下。  

concat(str1, str2, str3......)  
对于字符串中存在的空格，我们可以用字符串处理函数RTRIM()、LTRIM()、TRIM()来进行处理。  

3.使用别名  

我们可以用关键字as来给我们的列起一个别名。格式如下  

select <列名> as <别名> from <表名>;  
六、使用函数处理数据    
函数的可移植性是很强的，而且使用函数可以很方便的对数据进行处理。  

sql函数主要有四种  

文本函数  
数值函数  
日期与时间函数  
系统函数  
下面介绍常用的一些函数  

1.文本函数  

left(s, n)          //返回字符串左边的n个字符  
right(s, n)         //返回字符串右边的n个字符  
trim(s)             //去掉字符串s的空格  
ltrim(s)            //去掉字符串左边的空格  
rtrim(s)            //去掉字符串右边的空格  
length(s)           //计算字符串的长度  
lower(s)            //将字符串的所有字符变成小写  
upper(s)            //将字符串的所有字符变成大写  
2.数值函数  

abs(x)             //绝对值  
cos(x)  
sin(x)  
tan(x)  
acos(x) asin() atan()     //三角函数  
ceil(x)             //返回大于或等于x的最小整数  
floor(x)            //舍去x的小数部分，只保留整数部分，并且不进行四舍五入  
pi()               //返回圆周率  
sqrt(x)            //平方根  
pow(x, y)          //x的y次方  
exp(x)             //返回e的x次方  
rand()             //返回0-1的随机数  
round(x, y)            //返回x的值小数点后面的第y位，进行四舍五入  
truncate(x, y)     //返回x的值小数点后面的第y位，不进行四舍五入  
3.日期与时间函数  

current_date()                  //返回当前日期  
current_time()                  //返回当前时间  
current_timestamp()/now()             //返回当前日期和时间  
date()                          //从日期或日期时间中提取出日期值  
year() month() day() hour() minute()     
date_format(d, f)               //以指定格式显示日期  
datediff(date1,date2)           //返回两个日期相差的天数，大日期在前  
timediff(datetime1,datetime2)   //返回形式为时:分:秒，大日期在前  
timestampdiff(interval,time1,time2)     //返回两个日期之差，大日期在后。精确到什么单位取决于第一个参数interval，可以为年---秒  
七、汇总数据  
聚合函数：聚合函数就是用来数据汇总的一类函数。以下五个聚合函数务必牢记。它们通常和分组数据进行结合使用。  

avg()  
min()  
max()   
count()    
sum()  
需要注意的是，聚合函数均不会处理NULL值。  

八、分组数据    
1.创建分组  

创建分组使用group by子句，格式如下。  

select <列名> from <表名>  
where <过滤条件>  
group by <列名>  
having <过滤条件>  
order by <列名> <排序方式>  
其实上面的格式也是select语句完整的格式。  

2.过滤分组  

过滤分组使用having，牢记where是行级过滤，having是组级过滤。  
  
九、使用子查询  
子查询也就是select语句的嵌套，有了子查询我们就可以进行复杂的查询。  

子查询返回的一张表，所以其位置也比较灵活，可以位于from后面，也可以位于where后面。  
  
子查询也可以说是一个一次性的视图。  

在执行顺序上，先执行子查询，再执行外层的查询。  

牢记：where子句中不能使用聚合函数。  

十、联接表  
表的连接主要分为以下几种。  

内连接  
外连接(左连接、右连接)  
自连接  
1.内连接  

语法格式如下：  

SELECT 查询字段 FROM 表1 [as] 别名 [INNER] JOIN 表2 [as] 别名 ON 表1.关系字段 = 表2.关系字段  
内连接就是得出两个表的交集部分。  

2.左连接  

语法格式如下：  

SELECT 查询字段 FROM 表1 [as] 别名 LEFT JOIN 表2 [as] 别名 ON 表1.关系字段 = 表2.关系字段  
左连接就是左边表的记录要全部显示出来，右表只有和左表匹配到的记录才进行显示。  

3.右连接  

和左连接相反，不再累述。  

4.自连接  

就是把一张表看成两张表。进行自连接往往是一张表的某些列间存在逻辑关系。  

十一、组合查询  
1.创建组合查询  

创建组合查询时我们使用UNION将两个或多个select语句查询出的结果组合在一起形成一个表。  

需要不同的select语句返回相同数量的列且对应列的数据类型相同，事实上应该是意义都一样才合理。  

2.union与union all  

对于组合查询出的结果，如果使用union，则会自动对结果进行去重。如果不想去重则使用union all  

3.组合查询的排序  

对于组合查询结果的排序只需要使用一个order by子句，放在最后一个select语句的后面即可。  

十二、插入、更新与删除数据  
1.插入数据    

insert into <表名>(列名1,列名2,...) values (数据...);  
虽然表名后面的列名表不是严格要求的，但是这样会更安全。如果不写出列名，则需要严格按照表的定义插入数据。  

如果我们只需要插入一行中的部分列，那么列出列名就变得必须了。  

1.1.插入检索出的数据  

使用insert...select语句进行。以下是格式。  

insert into <表名>(列名表)  
select <列名表> from <表名>;  
1.2.复制表  

create table copytable as  
select * from <表名>;  
2.更新数据  

update <表名>  
set <列名> = ...  
where <过滤条件>;  
一定切记不要忘了过滤条件，否则将会对所有行的数据进行更新。  

3.删除数据  
 
delete from <表名>  
where <过滤条件>;  
如果要删除某行中某列的元素，可以将其值更新为null。  
十三、使用视图  
视图是一张虚表，它并不存储实际的数据，存储的只是select语句。  
 
使用视图有如下的优点  

提高sql语句的重用性  
保证了数据的安全性  
大大简化了sql语句  
创建视图  

create view <视图名> as  
<select语句>;  
删除视图  

drop view <视图名>;  
十四、事务  
1.什么是事务  

需要在同一个处理单元中执行的一系列更新处理的集合。一个事务中包含多少个更新处理或者包含哪些处理，在DBMS中并没有固定的标准，而是根据用户的要求决定的。 

2.语法  

start transaction；  
DML语句1；  
DML语句2；  
DML语句3；  
...
ROLLBACK/COMMIT;  
3.理解事务  

事务其实很好理解，它将一系列操作放在一个块中形成一个代码块，这个代码块要执行就全部执行，要么就不执行。  

拿银行转账举例，转账的过程为，我的账户金额减少——>对方账户金额增加——>交易完毕。  

如果我的账户金额减少后出现了故障导致对方账户金额没有增加，那么这肯定是不被允许的。所以这个转账过程中的每一步都必须完整的执行。  

rollback就是在DML语句出现故障时，来使得数据库回滚到执行操作前的状态。而commit则是所有DML正确执行后才执行，告诉系统这个事务正常完成了，系统可以进入下一个新的状态了。  

## 说完了基础语法，来说说数据存储
数据可以存储在不同数据系统中

数据存储系统是MySql、Oracle、SQL Server还是其他系统。  
SQL:随着数据量的增加，查询时间过长，甚至导致服务器崩溃  
甲骨文：可支持海量数据查询，但无法支撑用户点击流数据  
hadoop:提供并行计算框架Mapreduce,但是使用繁琐  
hive:提供了HQL语言接口，便于并行计算  

1.数据仓库结构及各库表如何关联，星型、雪花型还是其他。

星型模是一种多维的数据关系，它由一个事实表和一组维表组成。每个维表都有一个维作为主键，所有这些维的主键组合成事实表的主键。强调的是对维度进行预处理，将多个维度集合到一个事实表，形成一个宽表。这也是我们在使用hive时，经常会看到一些大宽表的原因，大宽表一般都是事实表，包含了维度关联的主键和一些度量信息，而维度表则是事实表里面维度的具体信息，使用时候一般通过join来组合数据，相对来说对OLAP的分析比较方便

![image](https://github.com/gotolearnmaor/ML-a-long-way/blob/master/image/1345516634_6388.JPG)





生产数据库接收数据时是否有一定规则，比如只接收特定类型字段。

生产数据库面对异常值如何处理，强制转换、留空还是返回错误。

生产数据库及数据仓库系统如何存储数据，名称、含义、类型、长度、精度、是否可为空、是否唯一、字符编码、约束条件规则是什么。

接触到的数据是原始数据还是ETL后的数据，ETL规则是什么。

数据仓库数据的更新更新机制是什么，全量更新还是增量更新。

不同数据库和库表之间的同步规则是什么，哪些因素会造成数据差异，如何处理差异的。

在数据存储阶段，数据分析师需要了解数据存储内部的工作机制和流程，最核心的因素是在原始数据基础上经过哪些加工处理，最后得到了怎样的数据。由于数据在存储阶段是不断动态变化和迭代更新的，其及时性、完整性、有效性、一致性、准确性很多时候由于软硬件、内外部环境问题无法保证，这些都会导致后期数据应用问题






















